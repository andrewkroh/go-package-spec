types:
  # Rename generic "Type" enum to "FieldType" to avoid conflicts with Go keyword shadow.
  Type:
    name: FieldType
    doc: "FieldType represents the Elasticsearch mapping type of a field."

  Field:
    doc: "Field represents a field definition in a data stream's field mapping."
    fields:
      example:
        type: any
      null_value:
        type: any
      dynamic:
        type: any
        doc: "Dynamic controls whether new fields are added dynamically. Accepts true, false, \"strict\", or \"runtime\"."
      runtime:
        type: any
        doc: "Runtime specifies if this field is evaluated at query time. Can be a boolean or a script string."
      default_metric:
        type: any
      metrics:
        type: any

  Var:
    doc: "Var represents an input variable definition for a package."
    fields:
      default:
        type: any
        doc: "Default is the default value for the variable."
      options:
        type: any
        doc: "Options provides the list of selectable options when type is \"select\"."

  ElasticsearchIndexTemplateMappings:
    fields:
      dynamic:
        type: any
        doc: "Dynamic controls whether new fields can be added dynamically to the mapping."
      dynamic_templates:
        type: any
        doc: "DynamicTemplates defines custom rules for dynamic field mapping."

  IndexTemplateSettingIndexSort:
    fields:
      field:
        type: any
        doc: "Field is the field or fields used to sort documents."
      order:
        type: any
        doc: "Order is the sort order to use for each field."

  TransformSource:
    fields:
      index:
        type: any
        doc: "Index is the source index or indices for the transform."
      query:
        type: any
        doc: "Query filters the source documents."
      runtime_mappings:
        type: any
        doc: "RuntimeMappings defines runtime fields for the source."

  TransformPivot:
    fields:
      aggregations:
        type: any
        doc: "Aggregations defines the aggregations for the pivot."
      aggs:
        type: any
        doc: "Aggs is an alias for Aggregations."
      group_by:
        type: any
        doc: "GroupBy defines the grouping for the pivot."

  Transform:
    doc: "Transform represents an Elasticsearch transform definition."
    fields:
      _meta:
        name: Meta
        type: "map[string]any"
        doc: "Meta holds user-defined metadata about the transform."

  IngestPipeline:
    doc: "IngestPipeline represents an Elasticsearch ingest pipeline definition."
    fields:
      processors:
        type: "[]*Processor"
      on_failure:
        type: "[]*Processor"

  IntegrationManifestPolicyTemplateInput:
    fields:
      hide_in_var_group_options:
        type: "map[string][]string"
        doc: "HideInVarGroupOptions filters out specific var_group options for this input."

  # RequiredVars uses patternProperties and needs a map type.
  RequiredVars:
    name: RequiredVars

  # The routing rules schema has a name collision: the top-level array items
  # object and the #/definitions/routing_rule both singularize to "RoutingRule".
  # The generator produces RoutingRule (outer set) and RoutingRule2 (inner rule).
  RoutingRule:
    name: RoutingRuleSet
    doc: "RoutingRuleSet represents a set of routing rules for rerouting documents from a source dataset. Routing rules are a technical preview feature."

  RoutingRule2:
    name: RoutingRule
    doc: "RoutingRule defines a single routing rule within a RoutingRuleSet (technical preview)."
    fields:
      target_dataset:
        type: StringOrStrings
        doc: "TargetDataset is the field reference or static value for the dataset part of the data stream name."
      namespace:
        type: StringOrStrings
        doc: "Namespace is the field reference or static value for the namespace part of the data stream name."

  Changelog:
    extra_fields:
      - name: Date
        type: "*time.Time"
        doc: "Date is the approximate release date, populated via git blame when WithGitMetadata is used."
        json: "date,omitempty"
        yaml: "-"

  BuildManifestDependenciesECS:
    fields:
      reference:
        doc: "Reference is the ECS version source reference. Values begin with \"git@\" (e.g. \"git@v8.11.0\")."

base_types:
  Manifest:
    doc: "Manifest contains the common fields shared by all package manifest types."
    embed_meta: true
    output_file: manifest.go
    sources:
      - IntegrationManifest
      - InputManifest
      - ContentManifest
    fields:
      - categories
      - deprecated
      - description
      - format_version
      - icons
      - name
      - owner
      - screenshots
      - source
      - title
      - version
